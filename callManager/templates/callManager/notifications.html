<!-- // notification drop down -->
<div class="absolute top-16 left-1/2 -translate-x-1/2 mt-2 border-secondary border-solid border-2 bg-white dark:bg-dark-card-bg rounded-lg shadow-md p-4 w-full lg:w-auto lg:mx-auto max-h-1/2 z-40" 
    id="notification-dropdown">
    
<h1 class="sr-only">Notifications</h1>
    {% if notifications %}
    <div class="flex justify-stretch flex-grow h-full">
        <div class="flex flex-col flex-grow min-h-0">
    <ul class="divide-y divide-gray-100 dark:divide-dark-border-dark overflow-y-auto flex-grow custom-scrollbar max-h-96">
        {% for notification in notifications %}
        <li class="px-2 lg:px-4 py-2 {%if notification.read %}bg-gray-100 dark:bg-dark-border-dark{% else %}bg-white dark:bg-dark-card-bg{% endif %} hover:bg-gray-100 dark:hover:bg-dark-border-dark">
            
            <div class="flex flex-grow-0">
                <div class="flex flex-col w-1/6 mr-1">
                    <a href="{% url 'labor_request_list' notification.labor_request.labor_requirement.slug %}">
                    {% if notification.response == 'Declined' %}
                    <p class="text-sm text-danger dark:text-red-400">{{ notification.response }}</p>
                    {% elif notification.response == 'Confirmed' %}
                    <p class="text-sm text-success dark:text-green-400">{{ notification.response }}</p>
                    {% elif notification.response == 'Available' %}
                    <p class="text-sm font-bold text-teal dark:text-dark-teal">{{ notification.response }}</p>
                    {% endif %}

                    <p class="text-sm text-text-secondary dark:text-dark-text-secondary">{{ notification.sent_at|date:"m/d H:i" }}</p>
                </div>
                <div class="flex flex-col w-full">
                    <span class="text-text-primary dark:text-dark-text-primary">{{ notification.message }}</span></a>
                </div>
                <div class="flex flex-col">
                    <button class="ml-2 bg-primary text-dark-text-primary px-2 py-1 rounded hover:bg-primary-hover dark:bg-dark-primary dark:hover:bg-dark-primary-hover"
                        hx-post="{% url  'notifications' %}"
                        hx-vals='{"action": "delete", "notification_id": "{{ notification.id }}"}'
                        hx-trigger="click" 
                        hx-target="#notification-dropdown" 
                        hx-swap="outerHTML">Clear</button>
                </div>
        </li>
        {% endfor %}
    </ul>
    <div class="flex justify-around mt-3">
    
    <button class="w-auto bg-primary text-dark-text-primary px-5 py-1 rounded-lg hover:bg-primary-hover dark:bg-dark-primary dark:hover:bg-dark-primary-hover w-auto"
        hx-post="{% url  'notifications' %}" 
        hx-vals='{"action": "delete_all"}'
        hx-trigger="click" 
        hx-target="#notification-dropdown" 
        hx-swap="outerHTML">Clear All</button>
    <button class="w-auto bg-primary text-dark-text-primary px-5 py-1 rounded-lg hover:bg-primary-hover dark:bg-dark-primary dark:hover:bg-dark-primary-hover"
        hx-post="{% url  'notifications' %}" 
        hx-vals='{"action": "clear_read"}'
        hx-trigger="click" 
        hx-target="#notification-dropdown" 
        hx-swap="outerHTML">Clear Read</button>
    </div>
    </div>
    <!--
    <div class="flex-shrink-0 ml-5 w-12">

    <button class="w-auto bg-primary text-dark-text-primary px-3 py-1 rounded-full hover:bg-primary-hover dark:bg-dark-primary dark:hover:bg-dark-primary-hover"
        hx-get="{% url 'htmx_clear' %}" 
        
        hx-trigger="click" 
        hx-target="#notification-dropdown" 
        hx-swap="outerHTML">X</button>
    </div>
    -->
    </div>
    {% else %}
    <p hx-get="{% url 'htmx_clear' %}" hx-trigger="load delay:2s" hx-target="#notification-dropdown" hx-swap="outerHTML" class="px-4 py-2">No notifications.</p>
    {% endif %}

</div>
