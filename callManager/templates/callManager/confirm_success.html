{% extends 'callManager/base.html' %}

{% block title %}Confirmation Success - CallMan{% endblock %}

{% block content %}
    <div class="max-w-4xl mx-auto p-6 bg-card-bg rounded-lg shadow-md dark:bg-dark-card-bg dark:shadow-dark-shadow">
        <h1 class="text-2xl font-bold mb-4 text-text-heading dark:text-dark-text-primary">Confirmation Submitted</h1>
        <p class="text-text-primary mb-4 dark:text-dark-text-primary">Thank you for responding to the request for <strong>{{ event.event_name }}</strong>.</p>
        {% if confirmed_call_times %}
            <h2 class="text-xl font-semibold mb-2 text-text-primary dark:text-dark-text-primary">Confirmed Call Times</h2>
            <ul class="list-disc pl-5 mb-4">
                {% for item in confirmed_call_times %}
                    <li class="text-text-primary dark:text-dark-text-primary">
                        {{ item.call_time.name }} on {{ item.call_time.date|date:"F j, Y" }} at {{ item.call_time.time|time:"h:i A" }} (Position: {{ item.position }})
                        <a href="{{ item.gcal_url }}" target="_blank" class="text-primary hover:underline dark:text-dark-text-blue dark:hover:text-dark-primary-hover">Add to Google Calendar</a>
                        {% if item.message %}
                            <p class="text-text-secondary mt-1 dark:text-dark-text-secondary">{{ item.message }}</p>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-text-secondary mb-4 dark:text-dark-text-secondary">Your availability response has been recorded. Please await manager confirmation for non-First Come First Served positions.</p>
        {% endif %}
        <p class="text-text-primary mb-4 dark:text-dark-text-primary">
            {% if registration_url %}
                You can register or update your profile <a href="{{ registration_url }}" class="text-primary hover:underline dark:text-dark-text-blue dark:hover:text-dark-primary-hover">here</a>.
            {% else %}
                No further action is required.
            {% endif %}
        </p>
        <a href="{% url 'event_detail' event.slug %}" class="inline-block text-primary hover:underline dark:text-dark-text-blue dark:hover:text-dark-primary-hover">Back to Event</a>
    </div>
{% endblock %}
