{% load callman_tags %}
<div class="bg-gray-100 p-6 rounded-lg shadow">
    <h3 class="text-lg font-semibold mb-4">Request Workers for {{ labor_requirement.labor_type.name }}</h3>
    <p class="text-gray-600 mb-4">Needed: {{ labor_requirement.needed_labor }} ({{ labor_requirement.call_time.name }} at {{ labor_requirement.call_time.time }})</p>
    
    <!-- Search Bar -->
    <div class="mb-6">
        <input type="text" 
               name="search" 
               value="{{ search_query }}" 
               hx-get="{% url 'fill_labor_call_list' labor_requirement.id %}" 
               hx-target="#fill-list" 
               hx-trigger="keyup changed delay:300ms" 
               placeholder="Search by name or phone..." 
               class="w-full max-w-md p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500">
    </div>

    <!-- Worker List Container -->
    <div id="fill-list">
        {% include 'callManager/fill_labor_call_list_partial.html' %}
    </div>

    <form action="{% url 'event_detail' labor_requirement.call_time.event.id %}">
    <button type="submit" 
            class="mt-4 bg-red-500 text-white p-2 rounded hover:bg-red-600">Close</button>
    </form>
    {% if message %}
        <p class="text-green-600 mt-2">{{ message }}</p>
    {% endif %}
</div>
