<!-- callManager/labor_request_list_partial.html -->
{% if pending_requests %}
    <h2 class="text-xl font-semibold mb-2 text-text-yellow dark:text-dark-text-yellow">Pending Requests</h2>
    <ul class="space-y-2 mb-4">
        {% for request in pending_requests %}
            <li class="flex items-center justify-between text-text-yellow dark:text-dark-text-yellow">
                {{ request.worker.name|default:"Unnamed Worker" }} ({{ request.worker.phone_number }})
                <div>
                    <form method="post" class="inline">
                        {% csrf_token %}
                        <input type="hidden" name="request_id" value="{{ request.id }}">
                        <input type="hidden" name="action" value="confirm">
                        <button type="submit" class="bg-success text-dark-text-primary px-2 py-1 rounded hover:bg-success-hover dark:bg-dark-success dark:hover:bg-dark-success-hover">Confirm</button>
                    </form>
                    <form method="post" class="inline ml-2">
                        {% csrf_token %}
                        <input type="hidden" name="request_id" value="{{ request.id }}">
                        <input type="hidden" name="action" value="decline">
                        <button type="submit" class="bg-danger text-dark-text-primary px-2 py-1 rounded hover:bg-danger-hover dark:bg-dark-danger dark:hover:bg-dark-danger-hover">Decline</button>
                    </form>
                    <form method="post" class="inline ml-2">
                        {% csrf_token %}
                        <input type="hidden" name="request_id" value="{{ request.id }}">
                        <input type="hidden" name="action" value="delete">
                        <button type="submit" class="bg-secondary text-dark-text-primary px-2 py-1 rounded hover:bg-secondary-hover dark:bg-dark-secondary dark:hover:bg-dark-secondary-hover">Delete</button>
                    </form>
                </div>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p class="text-text-secondary mb-4 dark:text-dark-text-secondary">No pending requests.</p>
{% endif %}

<h2 class="text-xl font-semibold mb-2 text-text-green dark:text-dark-text-green">Confirmed Requests</h2>
{% if confirmed_requests %}
    <ul class="space-y-2 mb-4">
        {% for request in confirmed_requests %}
            <li class="flex items-center justify-between text-text-green dark:text-dark-text-green">
                {{ request.worker.name|default:"Unnamed Worker" }} ({{ request.worker.phone_number }})
                <div>
                    <form method="post" class="inline">
                        {% csrf_token %}
                        <input type="hidden" name="request_id" value="{{ request.id }}">
                        <input type="hidden" name="action" value="decline">
                        <button type="submit" class="bg-danger text-dark-text-primary px-2 py-1 rounded hover:bg-danger-hover dark:bg-dark-danger dark:hover:bg-dark-danger-hover">Decline</button>
                    </form>
                    <form method="post" class="inline ml-2">
                        {% csrf_token %}
                        <input type="hidden" name="request_id" value="{{ request.id }}">
                        <input type="hidden" name="action" value="delete">
                        <button type="submit" class="bg-secondary text-dark-text-primary px-2 py-1 rounded hover:bg-secondary-hover dark:bg-dark-secondary dark:hover:bg-dark-secondary-hover">Delete</button>
                    </form>
                </div>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p class="text-text-secondary mb-4 dark:text-dark-text-secondary">No confirmed requests.</p>
{% endif %}

<h2 class="text-xl font-semibold mb-2 text-text-red dark:text-dark-text-red">Declined Requests</h2>
{% if declined_requests %}
    <ul class="space-y-2 mb-4">
        {% for request in declined_requests %}
            <li class="flex items-center justify-between text-text-red dark:text-dark-text-red">
                {{ request.worker.name|default:"Unnamed Worker" }} ({{ request.worker.phone_number }})
                <div>
                    <form method="post" class="inline">
                        {% csrf_token %}
                        <input type="hidden" name="request_id" value="{{ request.id }}">
                        <input type="hidden" name="action" value="confirm">
                        <button type="submit" class="bg-success text-dark-text-primary px-2 py-1 rounded hover:bg-success-hover dark:bg-dark-success dark:hover:bg-dark-success-hover">Confirm</button>
                    </form>
                    <form method="post" class="inline ml-2">
                        {% csrf_token %}
                        <input type="hidden" name="request_id" value="{{ request.id }}">
                        <input type="hidden" name="action" value="delete">
                        <button type="submit" class="bg-secondary text-dark-text-primary px-2 py-1 rounded hover:bg-secondary-hover dark:bg-dark-secondary dark:hover:bg-dark-secondary-hover">Delete</button>
                    </form>
                </div>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p class="text-text-secondary mb-4 dark:text-dark-text-secondary">No declined requests.</p>
{% endif %}

{% if message %}
    <p class="text-text-green mt-2 dark:text-dark-text-green">{{ message }}</p>
{% endif %}
