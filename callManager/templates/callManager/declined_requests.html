{% extends 'callManager/base.html' %}
{% load callman_tags %}

{% block title %}Declined Requests - CallMan{% endblock %}

{% block content %}
    <h1 class="text-2xl font-bold mb-6">Declined Requests</h1>
    <div class="bg-white p-6 rounded-lg shadow-md max-w-4xl mx-auto">
        {% if requests %}
            <ul class="space-y-2 mb-4">
                {% for request in requests %}
                    <li class="flex items-center justify-between text-slate-700 border-b py-2">
                        <span>{{ request.worker.name|default:"Unnamed Worker" }} - 
                            {{ request.labor_requirement.call_time.event.event_name }} - 
                            {{ request.labor_requirement.call_time.name }} - 
                            {{ request.labor_requirement.labor_type }} - 
                            {{ request.labor_requirement.call_time.date }} - 
                            {{ request.labor_requirement.call_time.time }}
                        </span>
                        <form method="post" class="inline">
                            {% csrf_token %}
                            <input type="hidden" name="delete_request" value="true">
                            <input type="hidden" name="request_id" value="{{ request.id }}">
                            <button type="submit" class="bg-gray-500 text-white px-2 py-1 rounded hover:bg-gray-600">Delete Request</button>
                        </form>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p class="text-gray-600 mb-4">No declined requests found.</p>
        {% endif %}
        <a href="{% url 'manager_dashboard' %}" class="mt-4 inline-block text-blue-500 hover:underline">Back to Dashboard</a>
    </div>
{% endblock %}
